<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.3" />
<title>Getting Started Guide</title>
<style type="text/css">
/* Sans-serif font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
div#toctitle,
span#author, span#revnumber, span#revdate, span#revremark,
div#footer {
  font-family: Arial,Helvetica,sans-serif;
}

/* Serif font. */
div.sectionbody {
  font-family: Georgia,"Times New Roman",Times,serif;
}

/* Monospace font. */
tt {
  font-size: inherit;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

tt {
  font-size: inherit;
  color: navy;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

pre {
  padding: 0;
  margin: 0;
}

span#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
span#email {
}
span#revnumber, span#revdate, span#revremark {
}

div#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
div#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
div#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

div#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.tableblock, div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #777777;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  div#footer-badges { display: none; }
}

div#toc {
  margin-bottom: 2.5em;
}

div#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

</style>
<script type="text/javascript">
/*<![CDATA[*/
window.onload = function(){asciidoc.footnotes();}
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([2-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  var cont = document.getElementById("content");
  var noteholder = document.getElementById("footnotes");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      // Use [\s\S] in place of . so multi-line matches work.
      // Because JavaScript has no s (dotall) regex flag.
      note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      spans[i].innerHTML =
        "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
        "' title='View footnote' class='footnote'>" + n + "</a>]";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
}

}
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>Getting Started Guide</h1>
<span id="author">Eric Merritt ericbmerritt@gmail.com</span><br />
</div>
<div id="content">
<div class="sect1">
<h2 id="_what_is_sinan">What is Sinan</h2>
<div class="sectionbody">
<div class="paragraph"><p>Sinan is a build tool designed to build <a href="SinanProjects.html">SinanProjects</a> and
<a href="OTPApplications.html">OTPApplications</a>, Releases and Applications. Sinan leverages the
metadata artifacts provided by <a href="OTP.html">OTP</a> to do a good job building, testing,
releasing, etc with very little or no additional input from the
developer.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_quick_start">Quick start</h2>
<div class="sectionbody">
<div class="paragraph"><p>Lets start by generate a project with a single application. Sinan has
the gen task and this allows you to generate a buildable skeleton for
your new project. It wont do much, but it will give you an idea of how
sinan works.</p></div>
<div class="paragraph"><p>Lets call our new project foo. On the command line type the following
code.</p></div>
<div class="sect2">
<h3 id="_generating_the_project">Generating the project</h3>
<div class="listingblock">
<div class="title">Generate the foo project</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>  <span style="color: #009900">$&gt;</span> sinan gen foo</tt></pre></div></div>
<div class="paragraph"><p>This will take you through a series of quetions about yourself and the
project. I have provided a series of answers here, that illustrate how
to answer these questions.</p></div>
<div class="listingblock">
<div class="title">Answering the generated questions</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> starting: gen
 Please specify your name
 your name&gt; Eric Merritt
 Please specify your email address
 your email&gt; ericbmerritt@gmail.com
 Please specify the copyright holder
 copyright holder ("Eric Merritt")&gt; Erlware, LLC
 Please specify version of your project
 project version&gt; 0.11.0
 Please specify the ERTS version ("5.8.2")&gt;
 Is this a single application project ("n")&gt; y
 /Users/emerritt/tmp/foo/doc created ok.
 /Users/emerritt/tmp/foo/bin created ok.
 /Users/emerritt/tmp/foo/config created ok.
 /Users/emerritt/tmp/foo/ebin created ok.
 /Users/emerritt/tmp/foo/src created ok.
 /Users/emerritt/tmp/foo/include created ok.
 /Users/emerritt/tmp/foo/doc exists ok.
 Would you like a build config? ("y")&gt; n
 Project was created, you should be good to go!</tt></pre></div></div>
<div class="paragraph"><p>In this example we are going to generate a project with only one <a href="OTP.html">OTP</a>
application. The gen system needs to know a bit of information about
you, your name, who is going to hold the copyright, the project
version etc. For now, leave the erts version as is, you can do that by
just hitting enter after the promyt. This is a very simple project so
we don&#8217;t need a build config either. Just enter <em>n</em> after that
request.</p></div>
</div>
<div class="sect2">
<h3 id="_building_our_new_project">Building our new project</h3>
<div class="paragraph"><p>Now we have a project. Take a look and poke around. It should look
something like this</p></div>
<div class="listingblock">
<div class="title">The generated project</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>foo
 |-- bin
 |-- config
 |-- doc
 |-- ebin
 | |-- foo.app
 | `-- overview.edoc
 |-- include
 `-- src
      |-- foo_app.erl
      `-- foo_sup.erl</tt></pre></div></div>
<div class="paragraph"><p>As your project grows you will have more source files, documentation
etc. Thats to be expected. but lets get onto the more fun things. Lets
build the project.</p></div>
<div class="listingblock">
<div class="title">Build with sinan</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>  <span style="color: #009900">$&gt;</span> cd <span style="color: #990000">&lt;</span>my foo directory<span style="color: #990000">&gt;</span>
  <span style="color: #009900">$&gt;</span> sinan build</tt></pre></div></div>
<div class="paragraph"><p>cd into the top level of the project and run sinan build. This first
time its important that you do it from the top level.</p></div>
<div class="listingblock">
<div class="title">The built project</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>foo
 |-- _build
 | `-- development
 | |-- apps
 | | `-- foo-0.11.0
 | | |-- bin
 | | |-- config
 | | |-- doc
 | | |-- ebin
 | | | |-- foo.app
 | | | |-- foo_app.beam
 | | | |-- foo_sup.beam
 | | | `-- overview.edoc
 | | |-- include
 | | `-- src
 | | |-- foo_app.erl
 | | `-- foo_sup.erl
 | |-- info
 | | |-- deps
 | | `-- repoapps
 | `-- sig
 | |-- dep
 | | `-- _Users_emerritt_tmp_foo_ebin_foo.app.sig
 | `-- erldeps
 | |-- _Users_emerritt_tmp_foo_src_foo_app.erl.sig
 | `-- _Users_emerritt_tmp_foo_src_foo_sup.erl.sig
 |-- bin
 |-- config
 |-- doc
 |-- ebin
 | |-- foo.app
 | `-- overview.edoc
 |-- include
 `-- src
     |-- foo_app.erl
     `-- foo_sup.erl</tt></pre></div></div>
<div class="paragraph"><p>One thing to notice here immediately is that there is a new directory
called <tt>_build</tt>. Sinan never, ever touches your the source files in
your root directory. It creates a version of the directory under build
and does all of its changes there.</p></div>
<div class="paragraph"><p>For the most part you can ignore the <tt>info</tt> and <tt>sig</tt> directories. The
ones of interest to us right now is the app directory. If you look
there you will see that we have a fully deployable version of our app,
with the version number postpended just like erlang wants. We have all
of our source built into ebin and the source in src <a href="OTP.html">OTP</a> applications
are almost always distributed with source).</p></div>
<div class="paragraph"><p>Thats the build comand, but sinan can do a bunch more. Lets explore
some of the other commands.</p></div>
</div>
<div class="sect2">
<h3 id="_testing_the_project">Testing the project</h3>
<div class="paragraph"><p>Sinan has the ability to run eunit tests in a project and
automatically generates code coverage reports for those tests. Lets
add a test to the application behavior (foo_app.erl) file and run our
new tests. Currently the app file looks as follows.</p></div>
<div class="listingblock">
<div class="title">The current Application Behavior (foo_app.erl) file</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> <span style="font-style: italic"><span style="color: #9A1900">%%%----------------------------------------------------------------</span></span>
 <span style="font-style: italic"><span style="color: #9A1900">%%% </span></span><span style="color: #009900">@author</span><span style="font-style: italic"><span style="color: #9A1900"> Eric Merritt </span></span><span style="text-decoration: underline"><span style="color: #0000FF">&lt;ericbmerritt@gmail.com&gt;</span></span>
 <span style="font-style: italic"><span style="color: #9A1900">%%% </span></span><span style="color: #009900">@doc</span>
 <span style="font-style: italic"><span style="color: #9A1900">%%%</span></span>
 <span style="font-style: italic"><span style="color: #9A1900">%%% </span></span><span style="color: #009900">@end</span>
 <span style="font-style: italic"><span style="color: #9A1900">%%% </span></span><span style="color: #009900">@copyright</span><span style="font-style: italic"><span style="color: #9A1900"> 2011 Erlware, LLC</span></span>
 <span style="font-style: italic"><span style="color: #9A1900">%%%----------------------------------------------------------------,</span></span>
 <span style="font-weight: bold"><span style="color: #000080">-module</span></span>(foo<span style="color: #990000">_</span>app)<span style="color: #990000">.</span>

 <span style="font-weight: bold"><span style="color: #000080">-behaviour</span></span>(application)<span style="color: #990000">.</span>

 <span style="font-style: italic"><span style="color: #9A1900">%% Application callbacks</span></span>
 <span style="font-weight: bold"><span style="color: #000080">-export</span></span>([start<span style="color: #990000">/</span><span style="color: #993399">2</span>, stop<span style="color: #990000">/</span><span style="color: #993399">1</span>])<span style="color: #990000">.</span>

 <span style="font-style: italic"><span style="color: #9A1900">%%%===================================================================</span></span>
 <span style="font-style: italic"><span style="color: #9A1900">%%% Application callbacks</span></span>
 <span style="font-style: italic"><span style="color: #9A1900">%%%===================================================================</span></span>

 <span style="font-style: italic"><span style="color: #9A1900">%% </span></span><span style="color: #009900">@private</span>
 <span style="font-weight: bold"><span style="color: #000080">-spec</span></span> <span style="font-weight: bold"><span style="color: #000000">start</span></span>(<span style="font-weight: bold"><span style="color: #0000FF">normal</span></span> | {takeover, <span style="font-weight: bold"><span style="color: #0000FF">node</span></span>()} | {failover, <span style="font-weight: bold"><span style="color: #0000FF">node</span></span>()},
             <span style="font-weight: bold"><span style="color: #000000">any</span></span>()) <span style="color: #990000">-&gt;</span> {ok, <span style="font-weight: bold"><span style="color: #0000FF">pid</span></span>()} | {ok, <span style="font-weight: bold"><span style="color: #0000FF">pid</span></span>(), State<span style="color: #990000">::</span><span style="font-weight: bold"><span style="color: #000000">any</span></span>()} |
                       {error, Reason<span style="color: #990000">::</span><span style="font-weight: bold"><span style="color: #000000">any</span></span>()}<span style="color: #990000">.</span>
 <span style="font-weight: bold"><span style="color: #000000">start</span></span>(<span style="color: #990000">_</span>StartType, StartArgs) <span style="color: #990000">-&gt;</span>
     <span style="font-weight: bold"><span style="color: #0000FF">case</span></span> <span style="font-weight: bold"><span style="color: #000000">foo_sup:start_link</span></span>() <span style="font-weight: bold"><span style="color: #0000FF">of</span></span>
         {ok, Pid} <span style="color: #990000">-&gt;</span>
             {ok, Pid};
         Error <span style="color: #990000">-&gt;</span>
             Error
     <span style="font-weight: bold"><span style="color: #0000FF">end</span></span><span style="color: #990000">.</span>

 <span style="font-style: italic"><span style="color: #9A1900">%% </span></span><span style="color: #009900">@private</span>
 <span style="font-weight: bold"><span style="color: #000080">-spec</span></span> <span style="font-weight: bold"><span style="color: #000000">stop</span></span>(State<span style="color: #990000">::</span><span style="font-weight: bold"><span style="color: #000000">any</span></span>()) <span style="color: #990000">-&gt;</span> ok<span style="color: #990000">.</span>
 <span style="font-weight: bold"><span style="color: #000000">stop</span></span>(<span style="color: #990000">_</span>State) <span style="color: #990000">-&gt;</span>
     ok<span style="color: #990000">.</span>

 <span style="font-style: italic"><span style="color: #9A1900">%%%===================================================================</span></span>
 <span style="font-style: italic"><span style="color: #9A1900">%%% Internal functions</span></span>
 <span style="font-style: italic"><span style="color: #9A1900">%%%===================================================================</span></span></tt></pre></div></div>
<div class="paragraph"><p>For now we are just going to add a test section and a single test that
doesn&#8217;t do much that is very interesting.</p></div>
<div class="paragraph"><p>First we need to import the eunit header (don&#8217;t worry sinan makes sure
its avaibale). Then we can add a test section right below the internal
functions section.</p></div>
<div class="listingblock">
<div class="title">Adding the test</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> <span style="font-style: italic"><span style="color: #9A1900">%%%----------------------------------------------------------------</span></span>
 <span style="font-style: italic"><span style="color: #9A1900">%%% </span></span><span style="color: #009900">@author</span><span style="font-style: italic"><span style="color: #9A1900"> Eric Merritt </span></span><span style="text-decoration: underline"><span style="color: #0000FF">&lt;ericbmerritt@gmail.com&gt;</span></span>
 <span style="font-style: italic"><span style="color: #9A1900">%%% </span></span><span style="color: #009900">@doc</span>
 <span style="font-style: italic"><span style="color: #9A1900">%%%</span></span>
 <span style="font-style: italic"><span style="color: #9A1900">%%% </span></span><span style="color: #009900">@end</span>
 <span style="font-style: italic"><span style="color: #9A1900">%%% </span></span><span style="color: #009900">@copyright</span><span style="font-style: italic"><span style="color: #9A1900"> 2011 Erlware, LLC</span></span>
 <span style="font-style: italic"><span style="color: #9A1900">%%%----------------------------------------------------------------,</span></span>
 <span style="font-weight: bold"><span style="color: #000080">-module</span></span>(foo<span style="color: #990000">_</span>app)<span style="color: #990000">.</span>

 <span style="font-weight: bold"><span style="color: #000080">-behaviour</span></span>(application)<span style="color: #990000">.</span>

 <span style="font-style: italic"><span style="color: #9A1900">%% Application callbacks</span></span>
 <span style="font-weight: bold"><span style="color: #000080">-export</span></span>([start<span style="color: #990000">/</span><span style="color: #993399">2</span>, stop<span style="color: #990000">/</span><span style="color: #993399">1</span>])<span style="color: #990000">.</span>

 <span style="font-weight: bold"><span style="color: #000080">-include_lib</span></span>(<span style="color: #FF0000">"eunit/include/eunit.hrl"</span>)<span style="color: #990000">.</span>

 <span style="font-style: italic"><span style="color: #9A1900">%%%===================================================================</span></span>
 <span style="font-style: italic"><span style="color: #9A1900">%%% Application callbacks</span></span>
 <span style="font-style: italic"><span style="color: #9A1900">%%%===================================================================</span></span>

 <span style="font-style: italic"><span style="color: #9A1900">%% </span></span><span style="color: #009900">@private</span>
 <span style="font-weight: bold"><span style="color: #000080">-spec</span></span> <span style="font-weight: bold"><span style="color: #000000">start</span></span>(<span style="font-weight: bold"><span style="color: #0000FF">normal</span></span> | {takeover, <span style="font-weight: bold"><span style="color: #0000FF">node</span></span>()} | {failover, <span style="font-weight: bold"><span style="color: #0000FF">node</span></span>()},
             <span style="font-weight: bold"><span style="color: #000000">any</span></span>()) <span style="color: #990000">-&gt;</span> {ok, <span style="font-weight: bold"><span style="color: #0000FF">pid</span></span>()} | {ok, <span style="font-weight: bold"><span style="color: #0000FF">pid</span></span>(), State<span style="color: #990000">::</span><span style="font-weight: bold"><span style="color: #000000">any</span></span>()} |
                       {error, Reason<span style="color: #990000">::</span><span style="font-weight: bold"><span style="color: #000000">any</span></span>()}<span style="color: #990000">.</span>
 <span style="font-weight: bold"><span style="color: #000000">start</span></span>(<span style="color: #990000">_</span>StartType, StartArgs) <span style="color: #990000">-&gt;</span>
     <span style="font-weight: bold"><span style="color: #0000FF">case</span></span> <span style="font-weight: bold"><span style="color: #000000">foo_sup:start_link</span></span>() <span style="font-weight: bold"><span style="color: #0000FF">of</span></span>
         {ok, Pid} <span style="color: #990000">-&gt;</span>
             {ok, Pid};
         Error <span style="color: #990000">-&gt;</span>
             Error
     <span style="font-weight: bold"><span style="color: #0000FF">end</span></span><span style="color: #990000">.</span>

 <span style="font-style: italic"><span style="color: #9A1900">%% </span></span><span style="color: #009900">@private</span>
 <span style="font-weight: bold"><span style="color: #000080">-spec</span></span> <span style="font-weight: bold"><span style="color: #000000">stop</span></span>(State<span style="color: #990000">::</span><span style="font-weight: bold"><span style="color: #000000">any</span></span>()) <span style="color: #990000">-&gt;</span> ok<span style="color: #990000">.</span>
 <span style="font-weight: bold"><span style="color: #000000">stop</span></span>(<span style="color: #990000">_</span>State) <span style="color: #990000">-&gt;</span>
     ok<span style="color: #990000">.</span>

 <span style="font-style: italic"><span style="color: #9A1900">%%%===================================================================</span></span>
 <span style="font-style: italic"><span style="color: #9A1900">%%% Internal functions</span></span>
 <span style="font-style: italic"><span style="color: #9A1900">%%%===================================================================</span></span>

 <span style="font-style: italic"><span style="color: #9A1900">%%%===================================================================</span></span>
 <span style="font-style: italic"><span style="color: #9A1900">%%% Tests</span></span>
 <span style="font-style: italic"><span style="color: #9A1900">%%%===================================================================</span></span>
 <span style="font-weight: bold"><span style="color: #000000">something_test</span></span>() <span style="color: #990000">-&gt;</span>
    ?<span style="font-weight: bold"><span style="color: #000000">assertMatch</span></span>(foo, foo)<span style="color: #990000">.</span></tt></pre></div></div>
<div class="paragraph"><p>Notice the <tt>include_lib</tt> belowe the <tt>export</tt> and the new function
<tt>something_test</tt> in the tests section. Now that we have built once you
can be anywhere under the build dir and sinan will know how to find
everything.</p></div>
<div class="listingblock">
<div class="title">Running sinan test</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>  <span style="color: #009900">$&gt;</span> sinan <span style="font-weight: bold"><span style="color: #0000FF">test</span></span>
 starting<span style="color: #990000">:</span> build
 Building /Users/emerritt/tmp/foo/src/foo_app<span style="color: #990000">.</span>erl
 starting<span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #0000FF">test</span></span>
 Testing foo
 foo_app<span style="color: #990000">:</span> Test passed<span style="color: #990000">.</span>
 foo_sup<span style="color: #990000">:</span> There were no tests to run<span style="color: #990000">.</span></tt></pre></div></div>
<div class="paragraph"><p>We can see that we had a test in foo_app and that our test passed with
no problems. Sinan has added somethings to the <tt>_build</tt> area to give
us some more information about things like code coverage and test
results.</p></div>
<div class="listingblock">
<div class="title">Test task output</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> |-- _build
 | `-- development
 | |-- docs
 | | `-- coverage
 | | `-- foo
 | | |-- coverage_index.html
 | | |-- foo_app.html
 | | |-- foo_sup.html
 | | `-- index.html</tt></pre></div></div>
<div class="paragraph"><p>Everything that was in build is still there. I have cut out all the
stuff you have already seen so we can focus on the test output. When
sinan runs test code it also outputs code coverage reports. Those code
coverage reports go into the &lt;bulid-area&gt;/docs/coverage
folder. <tt>coverage_index.html</tt> is the place you want to go look with
your browser to see these coverage reports.</p></div>
</div>
<div class="sect2">
<h3 id="_creating_an_a_href_otp_html_otp_a_release">Creating an <a href="OTP.html">OTP</a> release</h3>
<div class="paragraph"><p>Creating a release for <a href="OTP.html">OTP</a> manually can be a pain in the butt. Sinan,
however, makes it trivial. We just need to run the sinan rel task to
get all of the rel, build, and script artifacts.</p></div>
<div class="paragraph"><p>Lets do that now</p></div>
<div class="listingblock">
<div class="title">Running the sinan release task</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> <span style="color: #009900">$&gt;</span> sinan release
 starting<span style="color: #990000">:</span> depends
 starting<span style="color: #990000">:</span> build
 starting<span style="color: #990000">:</span> release</tt></pre></div></div>
<div class="paragraph"><p>There isn&#8217;t much to look at in the output of the release task, but
there are some new interesting things in the <tt>_build</tt> area. Lets take
a look at that.</p></div>
<div class="listingblock">
<div class="title">Generated release information</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> |-- _build
 | `-- development
 | |-- releases
 | | `-- foo-0.11.0
 | | |-- foo.boot
 | | |-- foo.rel
 | | |-- foo.script
 | | `-- sys.config</tt></pre></div></div>
<div class="paragraph"><p>Once again everything that was there remains there, I have just cut
down the example to new items. Sinan has generated all of the release
artifacts for your new project by looking in your <a href="OTP.html">OTP</a> lib dir. In fact
it has also generated the release files as well.</p></div>
<div class="paragraph"><p>The *.rel file is by far the most interesting. Lets take a look at
what sinan generated.</p></div>
<div class="listingblock">
<div class="title">Generated release information</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> {release,{<span style="color: #FF0000">"foo"</span>,<span style="color: #FF0000">"0.11.0"</span>},
          {erts,<span style="color: #FF0000">"5.8.2"</span>},
          [{eunit,<span style="color: #FF0000">"2.1.6"</span>},
           {foo,<span style="color: #FF0000">"0.11.0"</span>},
           {kernel,<span style="color: #FF0000">"2.14.2"</span>},
           {stdlib,<span style="color: #FF0000">"1.17.2"</span>}]}<span style="color: #990000">.</span></tt></pre></div></div>
<div class="paragraph"><p>This is a good, fully expanded release file with all the current
dependencies, and with those dependencies resolved.</p></div>
<div class="paragraph"><p>Finially, we want to distribute this wonderful project to other
folks. Of course, <a href="OTP.html">OTP</a> provides the framework, but sinan knows how to
do the work for you. Lets look at that.</p></div>
</div>
<div class="sect2">
<h3 id="_creating_an_a_href_otp_html_otp_a_distribution">Creating an <a href="OTP.html">OTP</a> distribution</h3>
<div class="paragraph"><p>The dist task is much like the release task. It doesn&#8217;t have much
output but it does create artifacts in <tt>_build</tt> that we care
about. Lets run dist now and see what happens.</p></div>
<div class="listingblock">
<div class="title">Running the sinan dist task</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> <span style="color: #009900">$&gt;</span> sinan dist
 starting<span style="color: #990000">:</span> depends
 starting<span style="color: #990000">:</span> build
 starting<span style="color: #990000">:</span> release
 starting<span style="color: #990000">:</span> dist</tt></pre></div></div>
<div class="paragraph"><p>As you can see, not much output, but the real interesting stuff is in
the <tt>_build</tt> directory.</p></div>
<div class="listingblock">
<div class="title">The dist task output</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>|-- _build
| `-- development
| `-- tar
| `-- foo-0.11.0.tar.gz</tt></pre></div></div>
<div class="paragraph"><p>You can see that we have a tarball now that contains the a fully
deployable distribution of the project.</p></div>
<div class="paragraph"><p>Lets look at the distribution tarball. I have left off the application
dir contents in the interests of berevity.</p></div>
<div class="listingblock">
<div class="title">The distribution tarball contents</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>`-- foo-0.11.0
    |-- bin
    |-- lib
    | |-- eunit-2.1.6
    | |-- foo-0.11.0
    | |-- kernel-2.14.2
    | `-- stdlib-1.17.2
    `-- releases
        `-- foo-0.11.0
            |-- foo.boot
            |-- foo.rel
            `-- foo.script</tt></pre></div></div>
<div class="paragraph"><p>This is a normal <a href="OTP.html">OTP</a> distribution tarball with all of the dependencies included.</p></div>
<div class="paragraph"><p>Sinan has a few more commands and things can get much more complex if
you need them to be. If you need further help you can always run the
sinan help command.</p></div>
<div class="listingblock">
<div class="title">The sinan help command</div>
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> $&gt; sinan help
starting: help
depends
   Analyzes all of the dependencies in the project and pulls down
   those that arn't curently available locally

version
   Provides sinan server version information

test
   Runs all of the existing eunit unit tests in the project

shell
   Starts an erlang shell with all of the correct paths preset so the
   developer can noodle with the code to his hearts content

release
   Creates the *.rel, *.boot and *.script into the
   &lt;build-area&gt;/realeases/&lt;vsn&gt; directory. It also builds up a release
   tar bal into the &lt;build-area&gt;/tar/ directory

help
   Provides help information for the available tasks

gen
   Generates a buildable default project layout

doc
   Runs edoc across all sources in the project and outputs it into the
   build area

dist
   Creates an tarball of the distribution including release
   information. Check documentation for the dist task for
   configuration information

clean
   Removes the build area and everything underneath

build
   Compiles all of the compilable files in the project
</tt></pre></div></div>
<div class="paragraph"><p>don&#8217;t rely on the output here too much, go ahead and run help for
yourself. The output changes and (hopefully) becomes more useful over
time.</p></div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2011-01-17 19:54:24 CST
</div>
</div>
</body>
</html>
